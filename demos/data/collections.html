<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>BetaJS Collections</title>
		<script src="../assets/jquery-1.9.1.min.js"></script>
		<script src="../assets/beta.js"></script>
		<script src="../../dist/beta-data.js"></script>
	</head>
	<body>
		<div id="list1">
		</div>
		<hr />
		<div id="list2">
		</div>
		<hr />
		<div>
			<input id="first" />
			<input id="last" />
			<button id="add">Add</button>
		</div>
		<style>
			.red {
				background: red;
			}
		</style>
		<script>
			var collection = new BetaJS.Collections.Collection();
			
			removeName = function(id) {
				collection.remove(collection.getById(id));
			};
			
			template = function (property) {
				var id = BetaJS.Ids.objectId(property);
				return "<div class='" + id + "'><p>" +
						property.get("first") + " " + property.get("last") + " index: " + id +
						"<button onclick='removeName(\"" + id + "\")'>Remove</button>" + 
					"</p></div>";
			};
			
			collection.on("add", function (property) {
				$("#list1").append(template(property));
				$("#list2").append(template(property));
			});
			collection.on("remove", function (property) {
				var id = BetaJS.Ids.objectId(property);
				$("#list1 " + "." + id).remove();
				$("#list2 " + "." + id).remove();
			});
			collection.add({"first": "Max", "last": "Master"});
			collection.add({"first": "Fred", "last": "Fischer"});
			$("#add").on("click", function () {
				collection.add({"first": $("#first").val(), "last": $("#last").val()});
				$("#first").val("");
				$("#last").val("");
			});
		</script>
	</body>
</html>